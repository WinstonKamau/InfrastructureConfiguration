resources:
- name: k8s-node-pool
  type: container.v1.nodePool
  properties:
    name: test-node-pool
    initialNodeCount: 3
    locations:
      - us-central1-a
    version: "1.15.4-gke.22"
    config:
      {
        "machineType": n1-standard-1,
        "oauthScopes": [
          https://www.googleapis.com/auth/compute,
          https://www.googleapis.com/auth/devstorage.read_only
        ],
        "diskSizeGb": 10,
        "imageType": COS,
      }
    zone: us-central1-a
    clusterId: k8s-cluster-test
    description: "A node pool setup for use in a GCP cluster"

- name: k8s-cluster-test
  type: container.v1.cluster
  properties:
    name: k8s-cluster-test
    description: "A cluster set up for doing tests"
    nodePools:
      - test-node-pool
    location:
      - us-central1-a
    zone: us-central1-a
  metadata:
    dependsOn:
      - k8s-node-pool
